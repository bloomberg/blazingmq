name: Formatting check

on:
  pull_request:
    types:
      - "opened"
      - "reopened"
      - "synchronize"
      - "labeled"
      - "unlabeled"

jobs:
  formatting_check:
    name: Formatting Check
    runs-on: ubuntu-latest
    strategy:
      matrix:
        path:
          - 'src'
    steps:
      - uses: actions/checkout@v4
      - name: clang-format style check
        run: |
          export FORMAT_DIFF=`git clang-format-14 --diff -q`
          echo ${FORMAT_DIFF}
          if [ -n "${FORMAT_DIFF}" ]; then exit 1; fi
